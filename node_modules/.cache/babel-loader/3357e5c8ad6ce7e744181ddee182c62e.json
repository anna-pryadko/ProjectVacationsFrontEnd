{"ast":null,"code":"var _jsxFileName = \"/Users/annapryadko/Desktop/GitHub/ReactProjectVacations/projectvacations/src/Components/Main/Main.js\";\nimport React, { Component } from 'react';\nimport { Route, Link, Switch, Redirect } from 'react-router-dom';\nimport { MDBFormInline, MDBNavbar, MDBNavbarBrand, MDBNavbarNav, MDBNavbarToggler, MDBCollapse, MDBNavItem, MDBNavLink, MDBContainer, MDBMask, MDBView } from 'mdbreact';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport axios from \"axios\";\nimport Jumbotron from '../Jumbotron/Jumbotron'; //import Login from '../Login/Login';\n\nimport Registration from '../Registration/Registration';\nimport HomeUser from '../Home/HomeUser';\nimport HomeAdmin from '../Home/HomeAdmin';\nimport ModalLogin from '../ModalLogin/ModalLogin';\n\nclass Main extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      checkCookie: \"\",\n      userRole: \"\",\n      currentUser: {}\n    };\n\n    this.componentDidMount = () => {\n      var self = this;\n      axios.get(\"http://localhost:5000/checkCookie\", {\n        withCredentials: true\n      }).then(function (response) {\n        console.log('checkCookie', response.data); // 1 or 0\n\n        self.setState({\n          checkCookie: response.data\n        });\n      }).catch(function (error) {\n        console.log(\"Error\", error);\n      });\n      console.log(this.state.checkCookie);\n    };\n  }\n\n  render() {\n    if (localStorage.currentUser && this.state.checkCookie !== \"\") {\n      let currUser = JSON.parse(localStorage.currentUser);\n      console.log(\"currUser\", currUser);\n\n      if (this.state.checkCookie == '1' && currUser[0].role == '1') {\n        return React.createElement(Redirect, {\n          to: \"/HomeAdmin\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        });\n      }\n\n      if (this.state.checkCookie == '1' && currUser[0].role == '0') {\n        // redirect to Admin/User\n        return React.createElement(Redirect, {\n          to: \"/HomeUser\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        });\n      } else {\n        // redirect to Login/Registration\n        return React.createElement(Redirect, {\n          to: \"/Login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        });\n      }\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Main;","map":{"version":3,"sources":["/Users/annapryadko/Desktop/GitHub/ReactProjectVacations/projectvacations/src/Components/Main/Main.js"],"names":["React","Component","Route","Link","Switch","Redirect","MDBFormInline","MDBNavbar","MDBNavbarBrand","MDBNavbarNav","MDBNavbarToggler","MDBCollapse","MDBNavItem","MDBNavLink","MDBContainer","MDBMask","MDBView","BrowserRouter","Router","axios","Jumbotron","Registration","HomeUser","HomeAdmin","ModalLogin","Main","state","checkCookie","userRole","currentUser","componentDidMount","self","get","withCredentials","then","response","console","log","data","setState","catch","error","render","localStorage","currUser","JSON","parse","role"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,KAAT,EAAgBC,IAAhB,EAAsBC,MAAtB,EAA6BC,QAA7B,QAA4C,kBAA5C;AACA,SAASC,aAAT,EAAwBC,SAAxB,EAAmCC,cAAnC,EAAmDC,YAAnD,EAAiEC,gBAAjE,EAAmFC,WAAnF,EAAgGC,UAAhG,EAA4GC,UAA5G,EAAwHC,YAAxH,EAAsIC,OAAtI,EAA+IC,OAA/I,QAA8J,UAA9J;AACA,SAASC,aAAa,IAAIC,MAA1B,QAAwC,kBAAxC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAOC,SAAP,MAAsB,wBAAtB,C,CACA;;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,OAAOC,SAAP,MAAsB,mBAAtB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;;AAGA,MAAMC,IAAN,SAAmBxB,SAAnB,CAA6B;AAAA;AAAA;AAAA,SACzByB,KADyB,GACjB;AAENC,MAAAA,WAAW,EAAC,EAFN;AAGNC,MAAAA,QAAQ,EAAC,EAHH;AAKNC,MAAAA,WAAW,EAAC;AALN,KADiB;;AAAA,SAUvBC,iBAVuB,GAUL,MAAI;AAGpB,UAAIC,IAAI,GAAC,IAAT;AACAZ,MAAAA,KAAK,CAACa,GAAN,sCAA8C;AAACC,QAAAA,eAAe,EAAC;AAAjB,OAA9C,EACCC,IADD,CACM,UAASC,QAAT,EAAkB;AAEvBC,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BF,QAAQ,CAACG,IAAnC,EAFuB,CAEmB;;AAE1CP,QAAAA,IAAI,CAACQ,QAAL,CAAc;AAAEZ,UAAAA,WAAW,EAAEQ,QAAQ,CAACG;AAAxB,SAAd;AAEA,OAPD,EAQCE,KARD,CAQO,UAASC,KAAT,EAAe;AACnBL,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoBI,KAApB;AACF,OAVD;AAWAL,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKX,KAAL,CAAWC,WAAvB;AAED,KA3BsB;AAAA;;AA6B3Be,EAAAA,MAAM,GAAG;AAER,QAAIC,YAAY,CAACd,WAAb,IAA0B,KAAKH,KAAL,CAAWC,WAAX,KAAyB,EAAvD,EAA2D;AAC1D,UAAIiB,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACd,WAAxB,CAAf;AAGAO,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBO,QAAvB;;AAGA,UAAI,KAAKlB,KAAL,CAAWC,WAAX,IAA0B,GAA1B,IAAiCiB,QAAQ,CAAC,CAAD,CAAR,CAAYG,IAAZ,IAAmB,GAAxD,EAA4D;AAC1D,eAAQ,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAR;AACA;;AAED,UAAI,KAAKrB,KAAL,CAAWC,WAAX,IAA0B,GAA1B,IAAiCiB,QAAQ,CAAC,CAAD,CAAR,CAAYG,IAAZ,IAAmB,GAAxD,EAA4D;AAAI;AAC/D,eAAQ,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAR;AACA,OAFD,MAIK;AAAI;AACR,eAAQ,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAR;AACA;AACF;;AAEA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAMD;;AAzD0B;;AA2D3B,eAAetB,IAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Route, Link, Switch,Redirect} from 'react-router-dom';\nimport { MDBFormInline, MDBNavbar, MDBNavbarBrand, MDBNavbarNav, MDBNavbarToggler, MDBCollapse, MDBNavItem, MDBNavLink, MDBContainer, MDBMask, MDBView } from 'mdbreact';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport axios from \"axios\";\n\nimport Jumbotron from '../Jumbotron/Jumbotron';\n//import Login from '../Login/Login';\nimport Registration from '../Registration/Registration';\nimport HomeUser from '../Home/HomeUser';\nimport HomeAdmin from '../Home/HomeAdmin';\nimport ModalLogin from '../ModalLogin/ModalLogin';\n\n\nclass Main extends Component {\n    state = {\n\n      checkCookie:\"\",\n      userRole:\"\",\n      \n      currentUser:{},\n\n    };\n\n      componentDidMount=()=>{\n   \n\n        var self=this;\n        axios.get(`http://localhost:5000/checkCookie`,{withCredentials:true})\n        .then(function(response){\n          \n         console.log('checkCookie',response.data); // 1 or 0\n        \n         self.setState({ checkCookie: response.data });\n\n        })\n        .catch(function(error){\n           console.log(\"Error\",error);\n        });\n        console.log(this.state.checkCookie);\n    \n      }\n      \n  render() {\n\n   if (localStorage.currentUser&&this.state.checkCookie!==\"\") {\n    let currUser = JSON.parse(localStorage.currentUser) \n\n\n    console.log(\"currUser\",currUser)\n\n\n    if (this.state.checkCookie == '1' && currUser[0].role =='1'){ \n      return  <Redirect to=\"/HomeAdmin\"/>\n     }\n     \n     if (this.state.checkCookie == '1' && currUser[0].role =='0'){   // redirect to Admin/User\n      return  <Redirect to=\"/HomeUser\"/>\n     }\n    \n     else {   // redirect to Login/Registration\n      return  <Redirect to=\"/Login\"/>\n     }\n   }\n\n    return (\n      <div>\n\n     </div>\n    \n    );\n  }\n  }\n  export default Main;\n  "]},"metadata":{},"sourceType":"module"}