{"ast":null,"code":"var _jsxFileName = \"/Users/annapryadko/Desktop/GitHub/ReactProjectVacations/projectvacations/src/Components/Login/Login.js\";\nimport React, { Component } from 'react';\nimport axios from \"axios\"; //import Registration from './MyReg';\n\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn, MDBCard, MDBCardBody, MDBModalFooter } from 'mdbreact';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Route, Link, Switch, Redirect } from 'react-router-dom';\nimport Registration from '../Registration/Registration';\nimport Home from '../Home/Home'; // import MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\n// import AppBar from 'material-ui/AppBar';\n// import RaisedButton from 'material-ui/RaisedButton';\n// import TextField from 'material-ui/TextField';\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      userName: \"\",\n      password: \"\",\n      errorName: \"\",\n      errorPassword: \"\",\n      currentUser: {},\n      isLoginSuccess: \"\",\n      foundUsers: [],\n      isLoggedIn: false,\n      isAdmin: false,\n      checkCookie: \"\",\n      cookieArr: [] //  componentDidMount=()=>{\n      //   {   \n      //     var self=this;\n      //     axios.get(`http://localhost:4000/checkLogin?name=${name}&password=${password}`,{withCredentials:true})\n      //     .then(function(response){\n      //       console.log('isLoggedIn',response.data);\n      //      self.setState({ isLoggedIn: response.data });\n      //     })\n      //     .catch(function(error){\n      //        console.log(error);\n      //     });\n      //     }\n      //    }\n      //Validation userName and password\n\n    };\n\n    this.checkLogin = () => {\n      if (this._isFormValid()) {\n        let password = this.state.password;\n        let userName = this.state.userName;\n        var self = this;\n        axios.get(\"http://localhost:4000/checkLogin?name=\".concat(userName, \"&password=\").concat(password), {\n          withCredentials: true\n        }).then(function (response) {\n          console.log('currentUser', response.data);\n          self.setState({\n            currentUser: response.data\n          });\n          this.setLogin();\n        }).catch(function (error) {\n          console.log(error);\n        });\n      } else {\n        if (this.state.errorName) {\n          alert(this.state.errorName);\n        }\n\n        if (this.state.errorPassword) {\n          alert(this.state.errorPassword);\n        }\n      }\n    };\n\n    this.setLogin = () => {\n      let localUser = this.state.currentUser;\n\n      if (localUser !== {}) {\n        localStorage.currentUser = JSON.stringify(localUser); //save user to localstorage \n\n        this.setState({\n          isLoggedIn: true\n        });\n\n        if (localUser.role == \"1\") {\n          this.setState({\n            isAdmin: true\n          });\n          console.log(\"isAdmin\", this.state.isAdmin);\n        } else {\n          this.setState({\n            isAdmin: false\n          });\n          console.log(\"isAdmin\", this.state.isAdmin);\n        }\n      } else {\n        alert('Name or password incorrect!');\n      }\n    };\n  }\n\n  _isFormValid() {\n    return this._isNameValid(this.state.username) && this._isPassValid(this.state.password);\n  }\n\n  _isNameValid(username) {\n    let isValid = true;\n    let errorName = '';\n\n    if (username === '') {\n      errorName = 'Name is empty!';\n      isValid = false;\n      this.setState({\n        errorName: errorName\n      });\n      return isValid;\n    }\n\n    if (username.length < 3) {\n      errorName = 'Name must have 3 symbols minimum!';\n      isValid = false;\n      this.setState({\n        errorName: errorName\n      });\n      return isValid;\n    }\n  }\n\n  _isPassValid(password) {\n    let isValid = true;\n    let errorPassword = '';\n\n    if (password === '') {\n      errorPassword = 'Password is empty!';\n      isValid = false;\n      this.setState({\n        errorName: errorPassword\n      });\n      return isValid;\n    }\n  } // Check Login  \n\n\n  render() {\n    if (this.state.isLoggedIn == true && this.state.isAdmin == true) {\n      return React.createElement(Redirect, {\n        to: \"/Home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      });\n    }\n\n    if (this.state.isLoggedIn == true && this.state.isAdmin == false) {\n      // redirect to Admin/User\n      return React.createElement(Redirect, {\n        to: \"/Home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(BrowserRouter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(MDBContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(MDBRow, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(MDBCol, {\n      md: \"6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(MDBCard, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(MDBCardBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"h4 text-center py-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"div\", {\n      className: \"grey-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(MDBInput, {\n      label: \"Your name\",\n      icon: \"user\",\n      group: true,\n      type: \"text\",\n      validate: true,\n      error: \"wrong\",\n      success: \"right\",\n      onChange: (event, target) => this.setState({\n        username: event.target.value\n      }) // onChange={this.changeName}\n      ,\n      value: this.state.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }), React.createElement(MDBInput, {\n      label: \"Your password\",\n      icon: \"lock\",\n      group: true,\n      type: \"password\",\n      validate: true,\n      onChange: (event, target) => this.setState({\n        password: event.target.value\n      }) // onChange={this.changePassword}\n      ,\n      value: this.state.password,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"text-center py-4 mt-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(MDBBtn, {\n      color: \"cyan\",\n      type: \"submit\",\n      onClick: this.checkLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"LOGIN\"))), React.createElement(MDBModalFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"font-weight-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Not a member? \", React.createElement(Link, {\n      to: \"/Registration\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Sign Up\"))))))))), React.createElement(Route, {\n      path: \"/Registration\",\n      exact: true,\n      component: Registration,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/Home\",\n      exact: true,\n      component: Home,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/annapryadko/Desktop/GitHub/ReactProjectVacations/projectvacations/src/Components/Login/Login.js"],"names":["React","Component","axios","MDBContainer","MDBRow","MDBCol","MDBInput","MDBBtn","MDBCard","MDBCardBody","MDBModalFooter","BrowserRouter","Route","Link","Switch","Redirect","Registration","Home","Login","state","userName","password","errorName","errorPassword","currentUser","isLoginSuccess","foundUsers","isLoggedIn","isAdmin","checkCookie","cookieArr","checkLogin","_isFormValid","self","get","withCredentials","then","response","console","log","data","setState","setLogin","catch","error","alert","localUser","localStorage","JSON","stringify","role","_isNameValid","username","_isPassValid","isValid","length","render","event","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from \"axios\";\n//import Registration from './MyReg';\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn, MDBCard, MDBCardBody,MDBModalFooter } from 'mdbreact';\nimport { BrowserRouter } from 'react-router-dom'\nimport { Route, Link, Switch, Redirect} from 'react-router-dom';\n\nimport Registration from '../Registration/Registration';\nimport Home from '../Home/Home';\n\n// import MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\n// import AppBar from 'material-ui/AppBar';\n// import RaisedButton from 'material-ui/RaisedButton';\n// import TextField from 'material-ui/TextField';\n\nclass Login extends Component {\n  state={\n    userName:\"\",\n    password:\"\",\n\n    errorName:\"\",\n    errorPassword:\"\",\n\n    currentUser:{},\n    isLoginSuccess:\"\",\n\n    foundUsers:[],\n    isLoggedIn: false,\n    isAdmin:false,\n\n    checkCookie:\"\",\n    cookieArr:[],\n   }\n\n    //  componentDidMount=()=>{\n    //   {   \n    //     var self=this;\n    //     axios.get(`http://localhost:4000/checkLogin?name=${name}&password=${password}`,{withCredentials:true})\n    //     .then(function(response){\n          \n    //       console.log('isLoggedIn',response.data);\n          \n    //      self.setState({ isLoggedIn: response.data });\n    //     })\n    //     .catch(function(error){\n    //        console.log(error);\n    //     });\n    \n    //     }\n    //    }\n\n//Validation userName and password\n\n_isFormValid() {\n  return this._isNameValid(this.state.username) && this._isPassValid(this.state.password)\n}\n\n_isNameValid(username) {\n  let isValid=true;\n  let errorName='';\n\n  if (username==='') {\n    errorName='Name is empty!';\n    isValid=false;\n    this.setState({errorName:errorName});\n    return isValid;\n  } \n\n  if (username.length < 3) {\n    errorName='Name must have 3 symbols minimum!';\n    isValid=false;\n    this.setState({errorName:errorName});\n    return isValid;\n  } \n}\n\n_isPassValid(password) {\n  let isValid=true;\n  let errorPassword='';\n\n  if (password==='') {\n    errorPassword='Password is empty!';\n    isValid=false;\n    this.setState({errorName:errorPassword});\n    return isValid;\n  } \n}\n\n      \n// Check Login  \n\n  checkLogin=()=>{ \n        \n        if (this._isFormValid()) {\n          let password=this.state.password;\n          let userName=this.state.userName; \n          var self=this;\n          axios.get(`http://localhost:4000/checkLogin?name=${userName}&password=${password}`,{withCredentials:true})\n          .then(function(response){\n            \n            console.log('currentUser',response.data);\n            \n          self.setState({ currentUser: response.data });\n\n          this.setLogin();  \n          })\n          .catch(function(error){\n            console.log(error);\n          });\n        } \n        else {\n          if (this.state.errorName) {alert(this.state.errorName);}\n          if (this.state.errorPassword) {alert(this.state.errorPassword);}\n         }\n\n      } \n\n    setLogin=()=>{       \n        let localUser = this.state.currentUser;\n\n          if(localUser!=={}){  \n            localStorage.currentUser=JSON.stringify(localUser); //save user to localstorage \n            this.setState({isLoggedIn:true})    \n            \n            if (localUser.role==\"1\")\n                 {\n                  this.setState({isAdmin: true});\n                  console.log(\"isAdmin\",this.state.isAdmin)    \n                 } \n                 else \n                   {\n                     this.setState({isAdmin: false});\n                     console.log(\"isAdmin\",this.state.isAdmin)\n                   }          \n                  }  \n                  else {\n                    alert('Name or password incorrect!')\n                  } \n                 }\n                 \n                \n                \n              \n\n    render() {\n\n      if (this.state.isLoggedIn == true && this.state.isAdmin ==true){ \n        return  <Redirect to=\"/Home\"/>\n       }\n       if (this.state.isLoggedIn == true && this.state.isAdmin ==false){   // redirect to Admin/User\n        return  <Redirect to=\"/Home\"/>\n       }\n\n        return (\n          <BrowserRouter>\n          \n            <MDBContainer>\n              <MDBRow>\n                <MDBCol md=\"6\">\n                  <MDBCard>\n                    <MDBCardBody>\n                      <form>\n                        <p className=\"h4 text-center py-4\">Login</p>\n                        <div className=\"grey-text\">\n                          <MDBInput\n                            label=\"Your name\"\n                            icon=\"user\"\n                            group\n                            type=\"text\"\n                            validate\n                            error=\"wrong\"\n                            success=\"right\"\n                            onChange = {(event,target) => this.setState({username:event.target.value})}\n                            // onChange={this.changeName}\n                            value={this.state.username}\n                          />\n                          <MDBInput\n                            label=\"Your password\"\n                            icon=\"lock\"\n                            group\n                            type=\"password\"\n                            validate\n                            onChange = {(event,target) => this.setState({password:event.target.value})}\n                            // onChange={this.changePassword}\n                            value={this.state.password}\n                          />\n                        </div>\n                        <div className=\"text-center py-4 mt-3\">\n                          <MDBBtn color=\"cyan\" type=\"submit\" onClick={this.checkLogin}>\n                            LOGIN\n                          </MDBBtn>\n                        </div>\n                      </form>\n                      <MDBModalFooter>\n                <div className=\"font-weight-light\">\n                  <p>Not a member? <Link to=\"/Registration\">Sign Up</Link></p>\n                  \n                  {/* <p>Forgot Password?</p> */}\n                </div>\n               \n              </MDBModalFooter>\n                    </MDBCardBody>\n                  </MDBCard>\n                </MDBCol>\n              </MDBRow>\n            \n            </MDBContainer>\n            \n          \n            <Route path=\"/Registration\" exact component={Registration} />\n            <Route path=\"/Home\" exact component={Home} />\n            </BrowserRouter>\n          );\n        };\n      }   \n  export default Login;\n  "]},"metadata":{},"sourceType":"module"}